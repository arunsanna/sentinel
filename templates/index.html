<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repository Scanner</title>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body class="min-h-screen bg-black"> <!-- Changed from gradient to bg-black -->
    <div id="root"></div>
    
    <!-- Component Scripts -->
    <!-- Base components first -->
    <script src="/static/js/components/Icon.js" defer></script>
    <!-- Other components -->
    <script src="/static/js/components/ThemeToggleButton.js" defer></script>
    <script src="/static/js/components/Header.js" defer></script>
    <script src="/static/js/components/Sidebar.js" defer></script>
    <script src="/static/js/components/RepoDetailModal.js" defer></script>
    <!-- Add other component scripts here as they are created, e.g.: -->
    <!-- <script src="/static/js/components/ControlsBar.js" defer></script> -->
    <!-- <script src="/static/js/components/RepositoryCard.js" defer></script> -->
    <!-- <script src="/static/js/components/ScanStatusDisplay.js" defer></script> -->
    <!-- <script src="/static/js/components/DirectoryBrowserModal.js" defer></script> -->
    <!-- <script src="/static/js/components/LoadingSkeleton.js" defer></script> -->
    <!-- <script src="/static/js/components/EmptyState.js" defer></script> -->

    <!-- Page Components -->
    <script src="/static/js/pages/GitRepoManagerPage.js" defer></script>

    <!-- Main App Shell -->
    <script src="/static/js/App.js" defer></script>

    <!-- Initialize React App -->
    <script type="text/javascript" defer>
        // Ensure this runs after all component scripts are loaded
        document.addEventListener('DOMContentLoaded', function() {
            const domContainer = document.getElementById('root');
            if (domContainer) {
                // Ensure React and ReactDOM are available
                if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
                    // Ensure App component is defined
                    if (typeof App !== 'undefined') {
                        const root = ReactDOM.createRoot(domContainer);
                        root.render(React.createElement(App));
                    } else {
                        console.error('App component is not defined. Check script loading order and file paths.');
                        domContainer.innerHTML = '<div style="color: red; padding: 20px;">Error: App component not loaded. See console.</div>';
                    }
                } else {
                    console.error('React or ReactDOM is not loaded. Check script tags.');
                    domContainer.innerHTML = '<div style="color: red; padding: 20px;">Error: React or ReactDOM not loaded. See console.</div>';
                }
            } else {
                console.error('Root element #root not found in the DOM.');
            }
        });
    </script>

    <noscript>
        <div class="p-8 text-center text-white">
            <h1 class="text-3xl font-bold mb-4">Repository Scanner</h1>
            <p class="text-lg">You need to enable JavaScript to run this app.</p>
        </div>
    </noscript>
</body>
</html>